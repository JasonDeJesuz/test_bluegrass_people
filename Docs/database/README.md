# Database Setup for People Directory

## Setup

##### There are 3 different ways which the database can be done, all 3 of which have been catered for in this project. ðŸ˜‰

1. Microsoft SQL Server (Stand-Alone installation and setup)
2. Docker MS SQL Server 2019
3. In Memory (Using EntityFrameworkCore.InMemory)

## 1. Microsoft SQL Server

## 2. Docker MS SQL Server 2019

## 3. In Memory

## Tech

### ðŸ‘‰ _Migrations
During development, you may have used the Create and Drop APIs to iterate quickly, changing your model as needed; but now that your application is going to production, you need a way to safely evolve the schema without dropping the entire database.

#### Install the Tools
First, you'll have to install the [EF Core command-line tools](https://docs.microsoft.com/en-us/ef/core/cli/):

We generally recommend using the [.NET Core CLI tools](https://docs.microsoft.com/en-us/ef/core/cli/dotnet), which work on all platforms.
If you're more comfortable working inside Visual Studio or have experience with EF6 migrations, you can also use the [Package Manager Console tools](https://docs.microsoft.com/en-us/ef/core/cli/powershell).

#### Create your first migration
```
dotnet ef migrations add InitialDatabase
```
EF Core will create a directory called Migrations in your project, and generate some files. It's a good idea to inspect what exactly EF Core generated - and possibly amend it - but we'll skip over that for now.

#### Create database and schema
```
dotnet ef database update
```

#### Updating the database with features
##### 1. Creating the migration
```
dotnet ef migrations add MakeMyChange
```
Note that we give migrations a descriptive name, to make it easier to understand the project history later.

Since this isn't the project's first migration, EF Core now compares your updated model against a snapshot of the old model, before the column was added; the model snapshot is one of the files generated by EF Core when you add a migration, and is checked into source control. Based on that comparison, EF Core detects that a column has been added, and adds the appropriate migration.

You can now apply your migration as before:

##### 2. Apply the migration
```
dotnet ef database update
```
Note that this time, EF detects that the database already exists. In addition, when our first migration was applied above, this fact was recorded in a special migrations history table in your database; this allows EF to automatically apply only the new migration.

## References
- https://docs.microsoft.com/en-us/ef/core/managing-schemas/migrations/?tabs=dotnet-core-cli